<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Docs |  ~/cryptocode</title>
<meta name="keywords" content="">
<meta name="description" content="Docs -  ~/cryptocode">
<meta name="author" content="">
<link rel="canonical" href="https://cryptocode.github.io/blog/docs/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.31670b680bf0c33daf591b5847a304d489f83cb2bc3d2971d5f25009e51af4ca.css" integrity="sha256-MWcLaAvwwz2vWRtYR6ME1In4PLK8PSlx1fJQCeUa9Mo=" rel="preload stylesheet" as="style"><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gentium+Plus:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
<link rel="icon" href="https://cryptocode.github.io/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cryptocode.github.io/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cryptocode.github.io/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://cryptocode.github.io/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://cryptocode.github.io/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://cryptocode.github.io/blog/docs/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><meta property="og:title" content="Docs" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://cryptocode.github.io/blog/docs/" />
<meta property="og:image" content="https://cryptocode.github.io/blog/images/mondrian.png" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://cryptocode.github.io/blog/images/mondrian.png" />
<meta name="twitter:title" content="Docs"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Docs",
      "item": "https://cryptocode.github.io/blog/docs/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cryptocode.github.io/blog/" accesskey="h" title=" ~/cryptocode (Alt + H)">
                <img src="https://cryptocode.github.io/blog/images/mondrian.png" alt="" aria-label="logo"
                    height="35"> ~/cryptocode</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Docs
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Zig asserts are not C asserts
    </h2>
  </header>
  <div class="entry-content">
    <p>I recently came across a piece of code in a Ziggit.dev post that gave me pause:
pub fn putOne(q: *@This(), io: Io, item: Elem) Cancelable!void { assert(try q.put(io, &amp;.{item}, 1) == 1); } pub fn getOne(q: *@This(), io: Io) Cancelable!Elem { var buf: [1]Elem = undefined; assert(try q.get(io, &amp;buf, 1) == 1); return buf[0]; } …which lead me to ask the following:
Just a quick side quest: Doesn’t the assert here risk put and get calls being optimized away?...</p>
  </div>
  <footer class="entry-footer"><span title='2025-07-22 20:32:37 +0200 +0200'>July 22, 2025</span></footer>
  <a class="entry-link" aria-label="post link to Zig asserts are not C asserts" href="https://cryptocode.github.io/blog/docs/assert/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Embedding machine code in Zig
    </h2>
  </header>
  <div class="entry-content">
    <p>Linux and macOS Rosetta notes Assembling Calling from Zig A larger example with fast memcpy and syscalls Using assembly code with Zig is usually done via inline assembly, or by linking to object files produced by assemblers.
This post explores a third way: write the assembly in a separate source file, run an assembler, and then embed the resulting machine code using @embedFile
Linux and macOS Rosetta notes The code is tested on macOS, but also works with minor modifications on Linux (primarily the syscall number)...</p>
  </div>
  <footer class="entry-footer"><span title='2023-07-29 12:01:51 +0200 +0200'>July 29, 2023</span></footer>
  <a class="entry-link" aria-label="post link to Embedding machine code in Zig" href="https://cryptocode.github.io/blog/docs/machinecode/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Cache Me If You Can
    </h2>
  </header>
  <div class="entry-content">
    <p> Cache lines A little Zig surprise The code The numbers Hyperthreading adds a twist Cache topology How come making a struct in Zig less densely packed can give a 56% performance increase, with far less variability? This post takes a look at false sharing and how it can be caused by packed data layouts and unintended field reorderings.
...</p>
  </div>
  <footer class="entry-footer"><span title='2023-07-09 10:00:00 +0200 +0200'>July 9, 2023</span></footer>
  <a class="entry-link" aria-label="post link to Cache Me If You Can" href="https://cryptocode.github.io/blog/docs/falsesharing/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Async CPU bound workers in Zig
    </h2>
  </header>
  <div class="entry-content">
    <p>Zig has async/await support, which is typically used for IO bound operations.
In this article, however, we’ll use async/await to simplify writing a simple concurrent worker.
Goal: use all the cores on the machine to find a randomly selected 64-bit number whose lower N bits are all cleared.
How it works Instead of manually spinning up threads, we’re just going to use async/await, along with pub const io_mode = .evented; which informs the standard library to use a non-blocking event loop....</p>
  </div>
  <footer class="entry-footer"><span title='2021-05-02 10:00:00 +0200 +0200'>May 2, 2021</span></footer>
  <a class="entry-link" aria-label="post link to Async CPU bound workers in Zig" href="https://cryptocode.github.io/blog/docs/async/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Bio - All your parentheses are belong to us
    </h2>
  </header>
  <div class="entry-content">
    <p>In a previous Zig post, we wrote a small postfix notation calculator.
This post takes a look at something that take prefix notation to the extreme: a new language in the Lisp family called Bio
The goal of this project is to make it easy to play around with Lisp dialect ideas and to make a well-documented and readable Lisp interpreter for others to learn from. This article aims to point out some key areas people stumble on when writing a basic Lisp interpreter....</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-25 10:00:00 +0200 +0200'>April 25, 2021</span></footer>
  <a class="entry-link" aria-label="post link to Bio - All your parentheses are belong to us" href="https://cryptocode.github.io/blog/docs/bio-introduction/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Some notes on using Zig with Valgrind
    </h2>
  </header>
  <div class="entry-content">
    <p>Zig has a very nice built-in memory leak detector in its General Purpose Allocator (GPA), but sometimes you have to break out Valgrind to get to the bottom of things.
When I first did this, I ran into a couple of problems, which I’m jotting down here along with solutions.
Thanks to mikdusan, ifreund and lemonboy for helping me figure out various issues
First of all, to get Valgrind going with Zig programs, you’ll have to switch to the C allocator....</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-25 09:00:00 +0200 +0200'>April 25, 2021</span></footer>
  <a class="entry-link" aria-label="post link to Some notes on using Zig with Valgrind" href="https://cryptocode.github.io/blog/docs/valgrind-zig/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Zig scripts?!?
    </h2>
  </header>
  <div class="entry-content">
    <p>Look at this beauty:
//usr/bin/env zig run &#34;$0&#34; -- &#34;$@&#34; ; exit const std = @import(&#34;std&#34;); pub fn main() !void { std.log.info(&#34;Awesome, it works\n&#34;, .{}); } Let’s make it executable and run it:
chmod &#43;x myscript.zig ./myscript.zig info: Awesome, it works This works because // is a comment in Zig, and just an empty path component as far as the shell is concerned
Thanks to squirl for making the argument passing syntax more robus</p>
  </div>
  <footer class="entry-footer"><span title='2021-04-24 10:00:00 +0200 +0200'>April 24, 2021</span></footer>
  <a class="entry-link" aria-label="post link to Zig scripts?!?" href="https://cryptocode.github.io/blog/docs/shebang/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">A surprisingly capable RPN calculator in about 100 lines of Zig code
    </h2>
  </header>
  <div class="entry-content">
    <p>Summary:
Reverse polish notation is awesome Zig is awesome Before solving quadratic equations and diving into code, let’s see if 2 &#43; 2 is still 4:
2 2 &#43; M0 = 4 Phew! Notice how every answer is placed in the next available memory slot. This will be useful in our next example where we calculate the two solutions to a quadratic equation:
First we input the known values so these get memory slots we can reference, rather than repeating the constants....</p>
  </div>
  <footer class="entry-footer"><span title='2021-03-01 10:00:00 +0200 +0200'>March 1, 2021</span></footer>
  <a class="entry-link" aria-label="post link to A surprisingly capable RPN calculator in about 100 lines of Zig code" href="https://cryptocode.github.io/blog/docs/prefix-calculator/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Running Zig binaries on a KaiOS device
    </h2>
  </header>
  <div class="entry-content">
    <p>The goal here is to:
Cross-compile a Zig program Root a KaiOS device, and then install and run the cross-compiled program on the device We’re not making a GUI app or anything here, just a small “Hello world” program that we’ll cross-compile and run on the device. All sorts of interesting things can be done from this point on.
I’m using Android’s adb to push files to the device and to get a shell, so you’ll have to install that first if you wanna follow along....</p>
  </div>
  <footer class="entry-footer"><span title='2021-01-27 10:00:00 +0200 +0200'>January 27, 2021</span></footer>
  <a class="entry-link" aria-label="post link to Running Zig binaries on a KaiOS device" href="https://cryptocode.github.io/blog/docs/kaios/"></a>
</article>
    </main>
     </body>

</html>
